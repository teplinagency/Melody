{{ 's-newsletter.css' | asset_url | stylesheet_tag }}
{% render 'section-padding' %}

<section id="section-{{ section.id }}" class="s-newsletter typography">
  <div class="s-newsletter__inner page-width">
    <div class="s-newsletter__card">
      {% if section.settings.eyebrow_text != blank %}
        <p class="s-newsletter__eyebrow typography typography--h4 typography--gradient typography--uppercase typography--center typography--w-500">
          {{ section.settings.eyebrow_text }}
        </p>
      {% endif %}

      {% if section.settings.heading != blank %}
        <h2 class="s-newsletter__title typography typography--h2 typography--light typography--center">
          {{ section.settings.heading }}
        </h2>
      {% endif %}

      {% form 'customer', class: 's-newsletter__form' %}
        <input type="hidden" name="contact[tags]" value="newsletter">
        <div class="s-newsletter__fields">
          <label class="s-newsletter__label visually-hidden" for="NewsletterEmail-{{ section.id }}">
            {{ section.settings.email_placeholder }}
          </label>
          <input
            id="NewsletterEmail-{{ section.id }}"
            type="email"
            name="contact[email]"
            class="s-newsletter__input typography typography--paragraph typography--light"
            value="{{ form.email }}"
            aria-required="true"
            autocorrect="off"
            autocapitalize="off"
            autocomplete="email"
            placeholder="{{ section.settings.email_placeholder }}"
            {% if form.errors %}
              autofocus
              aria-invalid="true"
              aria-describedby="Newsletter-error--{{ section.id }}"
            {% elsif form.posted_successfully? %}
              aria-describedby="Newsletter-success--{{ section.id }}"
            {% endif %}
            required
          >
          <button type="submit" class="btn btn--alternative s-newsletter__button" name="commit">
            {{ section.settings.button_label }}
          </button>
        </div>

        {% if form.errors %}
          <small class="s-newsletter__message typography typography--slim typography--grey" id="Newsletter-error--{{ section.id }}">
            {{- form.errors.translated_fields.email | capitalize }}
            {{ form.errors.messages.email -}}
          </small>
        {% endif %}

        {% if form.posted_successfully? %}
          <p
            class="s-newsletter__message s-newsletter__message--success typography typography--slim typography--light"
            id="Newsletter-success--{{ section.id }}"
            tabindex="-1"
            autofocus
          >
            {{ section.settings.success_message }}
          </p>
        {% endif %}
      {% endform %}

      {% if section.settings.note_text != blank %}
        <p class="s-newsletter__note typography typography--slim typography--grey typography--center">
          {{ section.settings.note_text }}
          {% if section.settings.note_link_label != blank %}
            <a class="s-newsletter__note-link typography typography--underline" href="{{ section.settings.note_link_url | default: '#' }}">
              {{ section.settings.note_link_label }}
            </a>
          {% endif %}
        </p>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "S-Newsletter",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "eyebrow_text",
      "label": "Eyebrow text",
      "default": "RESERVE YOURS"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Be first to feel what's next."
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "label": "Email placeholder",
      "default": "Your e-mail"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
      "default": "Get it now"
    },
    {
      "type": "text",
      "id": "success_message",
      "label": "Success message",
      "default": "Thanks for joining the list."
    },
    {
      "type": "text",
      "id": "note_text",
      "label": "Note text",
      "default": "Looking for more information?"
    },
    {
      "type": "text",
      "id": "note_link_label",
      "label": "Note link label",
      "default": "Check the forum"
    },
    {
      "type": "url",
      "id": "note_link_url",
      "label": "Note link URL"
    },
    {
      "type": "header",
      "content": "Section spacing"
    },
    {
      "type": "range",
      "id": "padding-top",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Padding top",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-bottom",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Padding bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-top-mobile",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Padding top mobile",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-bottom-mobile",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Padding bottom mobile",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "S-Newsletter"
    }
  ]
}
{% endschema %}
